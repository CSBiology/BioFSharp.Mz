<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Peptide retrieval by mass
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="BioFSharp.Mz aims to be a user-friendly library, offering a variety of implementations of well known or newly developed algorithms associated with the computational analysis of mass spectrometry data."/>
    <meta name="author" content="David Zimmer;"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="/BioFSharp.Mz/content/style.css" />
    <script type="text/javascript" src="/BioFSharp.Mz/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="https://github.com/CSBiology/BioFSharp.Mz">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/BioFSharp.Mz/index.html">BioFSharp.Mz</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="Peptide-retrieval-by-mass" class="anchor" href="#Peptide-retrieval-by-mass">Peptide retrieval by mass</a></h1>
<p>This part of the documentation aims to give you a brief overview of the functionality of SearchDB.fs. This Module contains functions<br />
to initialize a user configured peptide database and to subsequently perform common database operations such as inserts or lookUps.</p>
<h2><a name="Creating-a-peptide-database" class="anchor" href="#Creating-a-peptide-database">Creating a peptide database</a></h2>
<p>Prior to database creation the user has to specify the database parameters. The following examples will show this process in detail.
Some complex parameters will be discussed more specifically.</p>
<h2><a name="The-concept-of-peptide-modifications" class="anchor" href="#The-concept-of-peptide-modifications">The concept of peptide modifications</a></h2>
<p>In the library the term "Modification" is understood as literally any change to an amino acid formula. These changes can vary
from the exchange of an isotope (e.g. a N14 gets replaced with a N15) to an addition/deletion of chemical groups e.g. a phosphorylation.</p>
<h2><a name="Differentiation-of-fixed-variable-and-isotopic-modifications" class="anchor" href="#Differentiation-of-fixed-variable-and-isotopic-modifications">Differentiation of fixed, variable and isotopic modifications</a></h2>
<p>Creating a peptide database the user not only has to specify the modification itself but also its persistance. This is due to the fact
that the abundance of a modification can vary from one sample to another. This thought lead to a distinction between fixed, variable and
isotopic modifications during the construction of this library.</p>
<p>In a natural sample it is very unlikely for a modification like a phosphorylation to be present at every matching amino acid of every
peptide. The conclusion of this finding is that a database has to contain both, a modified and a unmodified version of the peptide simulating a
<strong>variable</strong> occurency of the modification coining the term <strong>"VariableModification"</strong>.</p>
<p>Contrary, further manipulations to the sample e.g. a selection of only N-terminally phosphorylated peptides can result in a sample
for which it can be assumed that roughly every peptide contains this modification. This would justify a creation of a peptide database with a
<strong>fixed</strong> N-terminal phosphorylation at every matching amino acid of every peptide. Hereby coining the term <strong>"FixedModification"</strong>.</p>
<hr />
<p>This expression constructs a new instance of the type SearchModification, which is needed to define Fixed- and VariableModifications
This type is inferred of the XMod ontology and the information stored in this type is needed to build instances of the type Modification.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="id">BioFSharp</span>
<span class="k">open</span> <span class="id">BioFSharp</span><span class="pn">.</span><span class="id">Mz</span>
<span class="k">open</span> <span class="id">ModificationInfo</span>
<span class="k">open</span> <span class="id">AminoAcids</span>
<span class="k">open</span> <span class="id">SearchDB</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">sdbParams</span> <span class="o">=</span> <span class="id">SearchDB</span><span class="pn">.</span><span class="id">getSDBParamsBy</span> <span class="s">@&quot;C:\Users\david\Documents\BioInfo\58_Markus\data\20170824 GE MRms0573001.db&quot;</span>

<span class="c">/// Returns a instance of the type SearchModification</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="id">phosphorylation</span> <span class="o">=</span> <span class="pn">{</span>
    <span class="c">// Name of this SearchModification </span>
    <span class="id">Name</span><span class="o">=</span><span class="s">&quot;Phosphorylation&quot;</span> 
    <span class="c">// Xmod accession Number</span>
    <span class="id">Accession</span><span class="o">=</span><span class="s">&quot;21&quot;</span> 
    <span class="c">// A brief description of the SearchModification</span>
    <span class="id">Description</span><span class="o">=</span><span class="s">&quot;Addition of a phosphate group to the AA residue&quot;</span>
    <span class="c">// A string representation of the formula composition </span>
    <span class="id">Composition</span><span class="o">=</span> <span class="s">&quot;HO3P&quot;</span>
    <span class="c">// Specifices the ModLocation</span>
    <span class="id">Site</span><span class="o">=</span> <span class="pn">[</span><span class="id">Specific</span><span class="pn">(</span><span class="id">Ser</span><span class="pn">,</span><span class="id">ModLocation</span><span class="pn">.</span><span class="id">Residual</span><span class="pn">)</span><span class="pn">;</span> <span class="id">Specific</span><span class="pn">(</span><span class="id">Thr</span><span class="pn">,</span><span class="id">ModLocation</span><span class="pn">.</span><span class="id">Residual</span><span class="pn">)</span><span class="pn">;</span> <span class="id">Specific</span><span class="pn">(</span><span class="id">Tyr</span><span class="pn">,</span><span class="id">ModLocation</span><span class="pn">.</span><span class="id">Residual</span><span class="pn">)</span><span class="pn">]</span>
    <span class="c">// Specifies if the Modification is additive or subtractive</span>
    <span class="id">MType</span><span class="o">=</span><span class="id">SearchModType</span><span class="pn">.</span><span class="id">Plus</span>
    <span class="c">// If a modified AminoAcid is shown via string representation this code is placed before</span>
    <span class="c">// the AminoAcid Symbol e.g. &quot;phS&quot;</span>
    <span class="id">XModCode</span><span class="o">=</span> <span class="s">&quot;ph&quot;</span>
    <span class="pn">}</span> 
</code></pre></td>
</tr>
</table>
<p>As mentioned before, there is a need to model modifications that affect the peptide sequences on a <strong>isotopic</strong> level. This could be understood
as a special kind of FixedModification with the additional constrain that there is no addition or deletion of a chemical group but a isotopic
modification affecting every amino acid. e.g. a exchange of every N14 to a N15. As one could expect, these features coined the term "IsotopicModification".</p>
<p>This expression returns a instance of the type SearchInfoIsotopic, which is needed to define IsotopicModifications. This type is needed if the user
plans to introduce a IsotopicModifications e.g a replacement of the N14 isotopes with heavier N15 isotopes.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Returns a instance of the type SearchInfoIsotopic </span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="id">isoMod</span> <span class="o">=</span> <span class="pn">(</span><span class="id">SearchDB</span><span class="pn">.</span><span class="id">createSearchInfoIsotopic</span> <span class="s">&quot;N15&quot;</span> <span class="id">Elements</span><span class="pn">.</span><span class="id">Table</span><span class="pn">.</span><span class="id">N</span> <span class="id">Elements</span><span class="pn">.</span><span class="id">Table</span><span class="pn">.</span><span class="id">Heavy</span><span class="pn">.</span><span class="id">N15</span><span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<h2><a name="Selecting-and-initializing-a-mass-function" class="anchor" href="#Selecting-and-initializing-a-mass-function">Selecting and initializing a mass function</a></h2>
<p>The following expression returns a instance of a massfunction. The user can choose between functions that either return
the monoisotopic or the average mass of types that inherit the IBioItem interface (e.g. AminoAcids).<br />
Moreover, each function exists in a "WhitMemP" version that uses a dictionary to "remember" (store) already computed masses.
This approach is especially useful when the user aims to do many mass computations subsequently, as it is the case when
building a new database. The usage of a dictionary is the reason for this function to be initialized prior to database
creation.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">///Returns a instance of the massfunction BioItem.initMonoisoMassWithMemP</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="fn">massF</span> <span class="pn">:</span> <span class="pn">(</span><span class="id">IBioItem</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="vt">float</span><span class="pn">)</span> <span class="o">=</span>  <span class="id">BioItem</span><span class="pn">.</span><span class="id">initMonoisoMassWithMemP</span>
</code></pre></td>
</tr>
</table>
<h2><a name="Incorporation-of-all-parameters-in-a-single-record-type" class="anchor" href="#Incorporation-of-all-parameters-in-a-single-record-type">Incorporation of all parameters in a single record type</a></h2>
<p>This type contains all formerly designed Parameters and additional parameters.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
<span class="l">30: </span>
<span class="l">31: </span>
<span class="l">32: </span>
<span class="l">33: </span>
<span class="l">34: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Returns a instance of the type SearchDbParams</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="id">paramTestN15</span> <span class="o">=</span> <span class="pn">{</span>
        <span class="id">Name</span><span class="o">=</span><span class="s">&quot;Creinhardtii_full&quot;</span>
        <span class="c">// Path of db storage folder</span>
        <span class="id">DbFolder</span>            <span class="o">=</span> <span class="pn">(</span><span class="k">__SOURCE_DIRECTORY__</span> <span class="o">+</span> <span class="s">&quot;/data/&quot;</span><span class="pn">)</span>
        <span class="c">// Path of the user selected fasta file  </span>
        <span class="id">FastaPath</span>           <span class="o">=</span> <span class="pn">(</span><span class="k">__SOURCE_DIRECTORY__</span> <span class="o">+</span> <span class="s">&quot;/data/Creinhardtii_281_v5.5.protein.fasta&quot;</span><span class="pn">)</span>
        <span class="c">// Function that specifies the conversion of the Fasta Header to the protein name inserted in the database</span>
        <span class="id">FastaHeaderToName</span>   <span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 7)" onmouseover="showTip(event, 'fs7', 7)" class="id">id</span>
        <span class="c">// Protease that is used during in silico digestion of the proteins</span>
        <span class="id">Protease</span>            <span class="o">=</span> <span class="id">Digestion</span><span class="pn">.</span><span class="id">Table</span><span class="pn">.</span><span class="id">getProteaseBy</span> <span class="s">&quot;Trypsin&quot;</span>
        <span class="c">// Minimum number of missed cleavages</span>
        <span class="id">MinMissedCleavages</span>  <span class="o">=</span> <span class="n">0</span>
        <span class="c">// Maximum number of missed cleavages</span>
        <span class="id">MaxMissedCleavages</span>  <span class="o">=</span> <span class="n">3</span>
        <span class="c">// Maximum peptide mass inserted in the database</span>
        <span class="id">MaxMass</span>             <span class="o">=</span> <span class="n">15000.</span>
        <span class="c">// Mininmum peptide length </span>
        <span class="id">MinPepLength</span>        <span class="o">=</span> <span class="n">4</span>
        <span class="c">// Maximum pepide length</span>
        <span class="id">MaxPepLength</span>        <span class="o">=</span> <span class="n">65</span>
        <span class="c">// Contains a instance of SearchInfoIsotopic, set to None if no isotopic modification shall be introduced</span>
        <span class="id">IsotopicMod</span>           <span class="o">=</span> <span class="pn">[</span><span onmouseout="hideTip(event, 'fs3', 8)" onmouseover="showTip(event, 'fs3', 8)" class="id">isoMod</span><span class="pn">]</span> 
        <span class="c">// MassMode used during db creation</span>
        <span class="id">MassMode</span>            <span class="o">=</span> <span class="id">SearchDB</span><span class="pn">.</span><span class="id">MassMode</span><span class="pn">.</span><span class="id">Monoisotopic</span>
        <span class="c">// Massfunction used during db creation</span>
        <span class="id">MassFunction</span>        <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 9)" onmouseover="showTip(event, 'fs4', 9)" class="id">massF</span>
        <span class="c">// List of &quot;Fixedmodifications&quot;. </span>
        <span class="id">FixedMods</span>           <span class="o">=</span> <span class="pn">[</span><span class="pn">]</span>
        <span class="c">// List of &quot;VariableModificaions&quot;.  </span>
        <span class="id">VariableMods</span>        <span class="o">=</span> <span class="pn">[</span><span class="pn">]</span>
        <span class="c">// Maximum number of variable modifications per peptide this constrain is used to limit the computational </span>
        <span class="id">VarModThreshold</span>     <span class="o">=</span> <span class="n">5</span>
        <span class="pn">}</span>
</code></pre></td>
</tr>
</table>
<p>The following example illustrates how a database lookUp can be initialized. The function SearchDB.getPeptideLookUpBy
takes the defined SearchDbParams and returns a function that takes two float values (representing masses) as input
parameters and returns a list of peptides each with a mass in the range of first to the second mass used as input
parameters.</p>
<p>SearchDB.getPeptideLookUpBy first checks if a database with the given parameters already exists before it starts the
database creation process. If there is a database matching the user given SearchParameters the process will be finished
nearly immediatly. If a new database has to be created the computation time will depend on the complexity of the given
parameters such as the size of the FASTA file, the number of given Modifications, the maxPepLength et cetera.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Returns a function that takes two masses as input parameters and returns a list of peptides (wrapped in the type LookUpResult)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs8', 10)" onmouseover="showTip(event, 'fs8', 10)" class="fn">n15DBLookUpBy</span> <span class="o">=</span>  
        <span class="id">SearchDB</span><span class="pn">.</span><span class="id">getPeptideLookUpBy</span> <span onmouseout="hideTip(event, 'fs6', 11)" onmouseover="showTip(event, 'fs6', 11)" class="id">paramTestN15</span>   
         
</code></pre></td>
</tr>
</table>
<p>This example shows how the pattern used before can be modified slightly to return a function that only needs one parameter as
input to return a LookUpResult list.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Returns a function that takes one inputMass and returns a list of peptides (wrapped in the type LookUpResult) in the range </span>
<span class="c">/// of the inputMass-0.5 to inputMass+0.5 </span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="fn">n15LookUpPeptideBy</span> <span onmouseout="hideTip(event, 'fs10', 13)" onmouseover="showTip(event, 'fs10', 13)" class="id">inputMass</span> <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs11', 14)" onmouseover="showTip(event, 'fs11', 14)" class="id">lowerBorder</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs10', 15)" onmouseover="showTip(event, 'fs10', 15)" class="id">inputMass</span><span class="o">-</span><span class="n">0.5</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs12', 16)" onmouseover="showTip(event, 'fs12', 16)" class="id">upperBorder</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs10', 17)" onmouseover="showTip(event, 'fs10', 17)" class="id">inputMass</span><span class="o">+</span><span class="n">0.5</span> 
        <span onmouseout="hideTip(event, 'fs8', 18)" onmouseover="showTip(event, 'fs8', 18)" class="fn">n15DBLookUpBy</span> <span onmouseout="hideTip(event, 'fs11', 19)" onmouseover="showTip(event, 'fs11', 19)" class="id">lowerBorder</span> <span onmouseout="hideTip(event, 'fs12', 20)" onmouseover="showTip(event, 'fs12', 20)" class="id">upperBorder</span>
<span class="id">Mass</span><span class="pn">.</span><span class="id">rangePpm</span> <span class="n">20.</span> <span class="n">496.23395536185</span>
</code></pre></td>
</tr>
</table>
<p>This function can be used as shown in the code snippet below. As a inputMass the monoisotopic mass of the peptide <em>ANLGMEVMHER</em> can be used as a input.
This peptide is encoded by a protein which can be found in the FASTA used for the database creation. Surprisingly the list you obtain will be empty because
the database does not contain any peptides in the given massRange.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">  1: </span>
<span class="l">  2: </span>
<span class="l">  3: </span>
<span class="l">  4: </span>
<span class="l">  5: </span>
<span class="l">  6: </span>
<span class="l">  7: </span>
<span class="l">  8: </span>
<span class="l">  9: </span>
<span class="l"> 10: </span>
<span class="l"> 11: </span>
<span class="l"> 12: </span>
<span class="l"> 13: </span>
<span class="l"> 14: </span>
<span class="l"> 15: </span>
<span class="l"> 16: </span>
<span class="l"> 17: </span>
<span class="l"> 18: </span>
<span class="l"> 19: </span>
<span class="l"> 20: </span>
<span class="l"> 21: </span>
<span class="l"> 22: </span>
<span class="l"> 23: </span>
<span class="l"> 24: </span>
<span class="l"> 25: </span>
<span class="l"> 26: </span>
<span class="l"> 27: </span>
<span class="l"> 28: </span>
<span class="l"> 29: </span>
<span class="l"> 30: </span>
<span class="l"> 31: </span>
<span class="l"> 32: </span>
<span class="l"> 33: </span>
<span class="l"> 34: </span>
<span class="l"> 35: </span>
<span class="l"> 36: </span>
<span class="l"> 37: </span>
<span class="l"> 38: </span>
<span class="l"> 39: </span>
<span class="l"> 40: </span>
<span class="l"> 41: </span>
<span class="l"> 42: </span>
<span class="l"> 43: </span>
<span class="l"> 44: </span>
<span class="l"> 45: </span>
<span class="l"> 46: </span>
<span class="l"> 47: </span>
<span class="l"> 48: </span>
<span class="l"> 49: </span>
<span class="l"> 50: </span>
<span class="l"> 51: </span>
<span class="l"> 52: </span>
<span class="l"> 53: </span>
<span class="l"> 54: </span>
<span class="l"> 55: </span>
<span class="l"> 56: </span>
<span class="l"> 57: </span>
<span class="l"> 58: </span>
<span class="l"> 59: </span>
<span class="l"> 60: </span>
<span class="l"> 61: </span>
<span class="l"> 62: </span>
<span class="l"> 63: </span>
<span class="l"> 64: </span>
<span class="l"> 65: </span>
<span class="l"> 66: </span>
<span class="l"> 67: </span>
<span class="l"> 68: </span>
<span class="l"> 69: </span>
<span class="l"> 70: </span>
<span class="l"> 71: </span>
<span class="l"> 72: </span>
<span class="l"> 73: </span>
<span class="l"> 74: </span>
<span class="l"> 75: </span>
<span class="l"> 76: </span>
<span class="l"> 77: </span>
<span class="l"> 78: </span>
<span class="l"> 79: </span>
<span class="l"> 80: </span>
<span class="l"> 81: </span>
<span class="l"> 82: </span>
<span class="l"> 83: </span>
<span class="l"> 84: </span>
<span class="l"> 85: </span>
<span class="l"> 86: </span>
<span class="l"> 87: </span>
<span class="l"> 88: </span>
<span class="l"> 89: </span>
<span class="l"> 90: </span>
<span class="l"> 91: </span>
<span class="l"> 92: </span>
<span class="l"> 93: </span>
<span class="l"> 94: </span>
<span class="l"> 95: </span>
<span class="l"> 96: </span>
<span class="l"> 97: </span>
<span class="l"> 98: </span>
<span class="l"> 99: </span>
<span class="l">100: </span>
<span class="l">101: </span>
<span class="l">102: </span>
<span class="l">103: </span>
<span class="l">104: </span>
<span class="l">105: </span>
<span class="l">106: </span>
<span class="l">107: </span>
<span class="l">108: </span>
<span class="l">109: </span>
<span class="l">110: </span>
<span class="l">111: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// PeptideMass of the peptide known from the peptide *ANLGMEVMHER*. </span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs13', 21)" onmouseover="showTip(event, 'fs13', 21)" class="id">peptideMass</span> <span class="o">=</span> <span class="n">838.</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs14', 22)" onmouseover="showTip(event, 'fs14', 22)" class="id">i</span> <span class="o">=</span> <span class="pn">[</span><span class="n">830.</span> <span class="o">..</span> <span class="n">0.001</span> <span class="o">..</span> <span class="n">832.</span><span class="pn">]</span> 
<span onmouseout="hideTip(event, 'fs14', 23)" onmouseover="showTip(event, 'fs14', 23)" class="id">i</span><span class="pn">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs14', 24)" onmouseover="showTip(event, 'fs14', 24)" class="id">i</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 25)" onmouseover="showTip(event, 'fs15', 25)" class="id">Length</span><span class="o">-</span><span class="n">1</span><span class="pn">]</span>
<span onmouseout="hideTip(event, 'fs14', 26)" onmouseover="showTip(event, 'fs14', 26)" class="id">i</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 27)" onmouseover="showTip(event, 'fs15', 27)" class="id">Length</span>
<span class="pp">#time</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs16', 28)" onmouseover="showTip(event, 'fs16', 28)" class="id">res</span> <span class="o">=</span> 
    <span class="pn">[</span>
    <span class="k">for</span> <span onmouseout="hideTip(event, 'fs17', 29)" onmouseover="showTip(event, 'fs17', 29)" class="id">x</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs14', 30)" onmouseover="showTip(event, 'fs14', 30)" class="id">i</span> <span class="k">do</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs18', 31)" onmouseover="showTip(event, 'fs18', 31)" class="id">n15LookUpResult</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 32)" onmouseover="showTip(event, 'fs9', 32)" class="fn">n15LookUpPeptideBy</span> <span onmouseout="hideTip(event, 'fs17', 33)" onmouseover="showTip(event, 'fs17', 33)" class="id">x</span>
        <span class="k">yield</span> <span onmouseout="hideTip(event, 'fs18', 34)" onmouseover="showTip(event, 'fs18', 34)" class="id">n15LookUpResult</span> 
    <span class="pn">]</span>
<span onmouseout="hideTip(event, 'fs16', 35)" onmouseover="showTip(event, 'fs16', 35)" class="id">res</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 36)" onmouseover="showTip(event, 'fs19', 36)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 37)" onmouseover="showTip(event, 'fs20', 37)" class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs21', 38)" onmouseover="showTip(event, 'fs21', 38)" class="id">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs21', 39)" onmouseover="showTip(event, 'fs21', 39)" class="id">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 40)" onmouseover="showTip(event, 'fs15', 40)" class="id">Length</span><span class="pn">)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs18', 41)" onmouseover="showTip(event, 'fs18', 41)" class="id">n15LookUpResult</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs9', 42)" onmouseover="showTip(event, 'fs9', 42)" class="fn">n15LookUpPeptideBy</span> <span onmouseout="hideTip(event, 'fs13', 43)" onmouseover="showTip(event, 'fs13', 43)" class="id">peptideMass</span> 
<span class="c">/// Returns the result of the peptide lookup </span>
<span class="pp">#time</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs22', 44)" onmouseover="showTip(event, 'fs22', 44)" class="id">cachi2</span> <span class="o">=</span> <span class="id">Cache</span><span class="pn">.</span><span class="id">createCache</span><span class="pn">&lt;</span><span onmouseout="hideTip(event, 'fs23', 45)" onmouseover="showTip(event, 'fs23', 45)" class="id">int64</span><span class="pn">,</span> <span class="id">LookUpResult</span><span class="pn">&lt;</span><span class="id">AminoAcid</span><span class="pn">&gt;</span> <span onmouseout="hideTip(event, 'fs24', 46)" onmouseover="showTip(event, 'fs24', 46)" class="id">list</span><span class="pn">&gt;</span> 

        
<span class="c">//cachi.Count</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs25', 47)" onmouseover="showTip(event, 'fs25', 47)" class="fn">cachedLook</span> <span class="o">=</span> <span class="id">SearchDB</span><span class="pn">.</span><span class="id">getPeptideLookUpWithMemBy</span> <span onmouseout="hideTip(event, 'fs8', 48)" onmouseover="showTip(event, 'fs8', 48)" class="id">n15DBLookUpBy</span> <span onmouseout="hideTip(event, 'fs22', 49)" onmouseover="showTip(event, 'fs22', 49)" class="id">cachi2</span> 
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 50)" onmouseover="showTip(event, 'fs26', 50)" class="fn">cachedn15LookUpPeptideBy</span> <span onmouseout="hideTip(event, 'fs10', 51)" onmouseover="showTip(event, 'fs10', 51)" class="id">inputMass</span> <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs11', 52)" onmouseover="showTip(event, 'fs11', 52)" class="id">lowerBorder</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs10', 53)" onmouseover="showTip(event, 'fs10', 53)" class="id">inputMass</span><span class="o">-</span><span class="n">0.5</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs12', 54)" onmouseover="showTip(event, 'fs12', 54)" class="id">upperBorder</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs10', 55)" onmouseover="showTip(event, 'fs10', 55)" class="id">inputMass</span><span class="o">+</span><span class="n">0.5</span> 
        <span onmouseout="hideTip(event, 'fs25', 56)" onmouseover="showTip(event, 'fs25', 56)" class="fn">cachedLook</span> <span onmouseout="hideTip(event, 'fs11', 57)" onmouseover="showTip(event, 'fs11', 57)" class="id">lowerBorder</span> <span onmouseout="hideTip(event, 'fs12', 58)" onmouseover="showTip(event, 'fs12', 58)" class="id">upperBorder</span>
<span class="pp">#time</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs27', 59)" onmouseover="showTip(event, 'fs27', 59)" class="id">n15LookUpResult2</span> <span class="o">=</span>  
    <span onmouseout="hideTip(event, 'fs26', 60)" onmouseover="showTip(event, 'fs26', 60)" class="fn">cachedn15LookUpPeptideBy</span> <span class="n">830.001</span>

<span onmouseout="hideTip(event, 'fs27', 61)" onmouseover="showTip(event, 'fs27', 61)" class="id">n15LookUpResult2</span> <span class="pn">.</span><span class="id">Length</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs28', 62)" onmouseover="showTip(event, 'fs28', 62)" class="id">cachedRes</span> <span class="o">=</span> 
    <span class="pn">[</span>
    <span class="k">for</span> <span onmouseout="hideTip(event, 'fs17', 63)" onmouseover="showTip(event, 'fs17', 63)" class="id">x</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs14', 64)" onmouseover="showTip(event, 'fs14', 64)" class="id">i</span> <span class="k">do</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs27', 65)" onmouseover="showTip(event, 'fs27', 65)" class="id">n15LookUpResult2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs26', 66)" onmouseover="showTip(event, 'fs26', 66)" class="fn">cachedn15LookUpPeptideBy</span> <span onmouseout="hideTip(event, 'fs17', 67)" onmouseover="showTip(event, 'fs17', 67)" class="id">x</span>
        <span class="k">yield</span> <span onmouseout="hideTip(event, 'fs27', 68)" onmouseover="showTip(event, 'fs27', 68)" class="id">n15LookUpResult2</span>
    <span class="pn">]</span>


<span onmouseout="hideTip(event, 'fs28', 69)" onmouseover="showTip(event, 'fs28', 69)" class="id">cachedRes</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 70)" onmouseover="showTip(event, 'fs19', 70)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 71)" onmouseover="showTip(event, 'fs20', 71)" class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs21', 72)" onmouseover="showTip(event, 'fs21', 72)" class="id">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs21', 73)" onmouseover="showTip(event, 'fs21', 73)" class="id">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 74)" onmouseover="showTip(event, 'fs15', 74)" class="id">Length</span><span class="pn">)</span>
<span onmouseout="hideTip(event, 'fs22', 75)" onmouseover="showTip(event, 'fs22', 75)" class="id">cachi2</span><span class="pn">.</span><span class="id">Values</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs29', 76)" onmouseover="showTip(event, 'fs29', 76)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs30', 77)" onmouseover="showTip(event, 'fs30', 77)" class="id">concat</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs29', 78)" onmouseover="showTip(event, 'fs29', 78)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs31', 79)" onmouseover="showTip(event, 'fs31', 79)" class="id">length</span>

<span onmouseout="hideTip(event, 'fs19', 80)" onmouseover="showTip(event, 'fs19', 80)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs32', 81)" onmouseover="showTip(event, 'fs32', 81)" class="id">map2</span> <span class="pn">(</span><span class="k">fun</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs21', 82)" onmouseover="showTip(event, 'fs21', 82)" class="id">x</span><span class="pn">:</span> <span class="ta">&#39;</span><span class="id">a</span> <span onmouseout="hideTip(event, 'fs24', 83)" onmouseover="showTip(event, 'fs24', 83)" class="rt">list</span><span class="pn">)</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs33', 84)" onmouseover="showTip(event, 'fs33', 84)" class="id">y</span><span class="pn">:</span> <span class="ta">&#39;</span><span class="id">a</span> <span onmouseout="hideTip(event, 'fs24', 85)" onmouseover="showTip(event, 'fs24', 85)" class="rt">list</span><span class="pn">)</span> <span class="k">-&gt;</span> 
                <span onmouseout="hideTip(event, 'fs21', 86)" onmouseover="showTip(event, 'fs21', 86)" class="id">x</span> 
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 87)" onmouseover="showTip(event, 'fs19', 87)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 88)" onmouseover="showTip(event, 'fs20', 88)" class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs34', 89)" onmouseover="showTip(event, 'fs34', 89)" class="id">xs</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs19', 90)" onmouseover="showTip(event, 'fs19', 90)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs35', 91)" onmouseover="showTip(event, 'fs35', 91)" class="id">tryFind</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs36', 92)" onmouseover="showTip(event, 'fs36', 92)" class="id">ys</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs36', 93)" onmouseover="showTip(event, 'fs36', 93)" class="id">ys</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs34', 94)" onmouseover="showTip(event, 'fs34', 94)" class="id">xs</span> <span class="pn">)</span> <span onmouseout="hideTip(event, 'fs33', 95)" onmouseover="showTip(event, 'fs33', 95)" class="id">y</span> <span class="pn">)</span>
                <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 96)" onmouseover="showTip(event, 'fs19', 96)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs37', 97)" onmouseover="showTip(event, 'fs37', 97)" class="id">countBy</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs38', 98)" onmouseover="showTip(event, 'fs38', 98)" class="id">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs38', 99)" onmouseover="showTip(event, 'fs38', 99)" class="id">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs39', 100)" onmouseover="showTip(event, 'fs39', 100)" class="id">IsSome</span><span class="pn">)</span>
          <span class="pn">)</span> <span onmouseout="hideTip(event, 'fs28', 101)" onmouseover="showTip(event, 'fs28', 101)" class="id">cachedRes</span> <span onmouseout="hideTip(event, 'fs16', 102)" onmouseover="showTip(event, 'fs16', 102)" class="id">res</span>

<span class="pp">#time</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs27', 103)" onmouseover="showTip(event, 'fs27', 103)" class="id">n15LookUpResult2</span> <span class="o">=</span>  
    <span onmouseout="hideTip(event, 'fs26', 104)" onmouseover="showTip(event, 'fs26', 104)" class="fn">cachedn15LookUpPeptideBy</span> <span onmouseout="hideTip(event, 'fs13', 105)" onmouseover="showTip(event, 'fs13', 105)" class="id">peptideMass</span>

<span onmouseout="hideTip(event, 'fs27', 106)" onmouseover="showTip(event, 'fs27', 106)" class="id">n15LookUpResult2</span> <span class="pn">.</span><span class="id">Length</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs40', 107)" onmouseover="showTip(event, 'fs40', 107)" class="id">n15LookUpResult3</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs26', 108)" onmouseover="showTip(event, 'fs26', 108)" class="fn">cachedn15LookUpPeptideBy</span> <span onmouseout="hideTip(event, 'fs13', 109)" onmouseover="showTip(event, 'fs13', 109)" class="id">peptideMass</span>

<span onmouseout="hideTip(event, 'fs40', 110)" onmouseover="showTip(event, 'fs40', 110)" class="id">n15LookUpResult3</span><span class="pn">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs40', 111)" onmouseover="showTip(event, 'fs40', 111)" class="id">n15LookUpResult3</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 112)" onmouseover="showTip(event, 'fs15', 112)" class="id">Length</span><span class="o">-</span><span class="n">1</span><span class="pn">]</span>
<span onmouseout="hideTip(event, 'fs27', 113)" onmouseover="showTip(event, 'fs27', 113)" class="id">n15LookUpResult2</span> 

<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 114)" onmouseover="showTip(event, 'fs19', 114)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 115)" onmouseover="showTip(event, 'fs20', 115)" class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs41', 116)" onmouseover="showTip(event, 'fs41', 116)" class="id">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs41', 117)" onmouseover="showTip(event, 'fs41', 117)" class="id">x</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs40', 118)" onmouseover="showTip(event, 'fs40', 118)" class="id">n15LookUpResult3</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 119)" onmouseover="showTip(event, 'fs19', 119)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs35', 120)" onmouseover="showTip(event, 'fs35', 120)" class="id">tryFind</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs42', 121)" onmouseover="showTip(event, 'fs42', 121)" class="id">y</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs42', 122)" onmouseover="showTip(event, 'fs42', 122)" class="id">y</span><span class="pn">.</span><span class="id">BioSequence</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 123)" onmouseover="showTip(event, 'fs41', 123)" class="id">x</span><span class="pn">.</span><span class="id">BioSequence</span><span class="pn">)</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 124)" onmouseover="showTip(event, 'fs19', 124)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs43', 125)" onmouseover="showTip(event, 'fs43', 125)" class="id">filter</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs44', 126)" onmouseover="showTip(event, 'fs44', 126)" class="id">x</span> <span class="k">-&gt;</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs45', 127)" onmouseover="showTip(event, 'fs45', 127)" class="fn">snd</span> <span onmouseout="hideTip(event, 'fs44', 128)" onmouseover="showTip(event, 'fs44', 128)" class="id">x</span><span class="pn">)</span><span class="pn">.</span><span class="id">IsNone</span><span class="pn">)</span>

<span onmouseout="hideTip(event, 'fs40', 129)" onmouseover="showTip(event, 'fs40', 129)" class="id">n15LookUpResult3</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 130)" onmouseover="showTip(event, 'fs15', 130)" class="id">Length</span> 
<span onmouseout="hideTip(event, 'fs27', 131)" onmouseover="showTip(event, 'fs27', 131)" class="id">n15LookUpResult2</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 132)" onmouseover="showTip(event, 'fs15', 132)" class="id">Length</span>

<span onmouseout="hideTip(event, 'fs18', 133)" onmouseover="showTip(event, 'fs18', 133)" class="id">n15LookUpResult</span> 
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 134)" onmouseover="showTip(event, 'fs19', 134)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 135)" onmouseover="showTip(event, 'fs20', 135)" class="id">map</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs41', 136)" onmouseover="showTip(event, 'fs41', 136)" class="id">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs41', 137)" onmouseover="showTip(event, 'fs41', 137)" class="id">x</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs27', 138)" onmouseover="showTip(event, 'fs27', 138)" class="id">n15LookUpResult2</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 139)" onmouseover="showTip(event, 'fs19', 139)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs35', 140)" onmouseover="showTip(event, 'fs35', 140)" class="id">tryFind</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs42', 141)" onmouseover="showTip(event, 'fs42', 141)" class="id">y</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs42', 142)" onmouseover="showTip(event, 'fs42', 142)" class="id">y</span><span class="pn">.</span><span class="id">BioSequence</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 143)" onmouseover="showTip(event, 'fs41', 143)" class="id">x</span><span class="pn">.</span><span class="id">BioSequence</span><span class="pn">)</span><span class="pn">)</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs19', 144)" onmouseover="showTip(event, 'fs19', 144)" class="m">List</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs43', 145)" onmouseover="showTip(event, 'fs43', 145)" class="id">filter</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs44', 146)" onmouseover="showTip(event, 'fs44', 146)" class="id">x</span> <span class="k">-&gt;</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs45', 147)" onmouseover="showTip(event, 'fs45', 147)" class="fn">snd</span> <span onmouseout="hideTip(event, 'fs44', 148)" onmouseover="showTip(event, 'fs44', 148)" class="id">x</span><span class="pn">)</span><span class="pn">.</span><span class="id">IsNone</span><span class="pn">)</span>

<span onmouseout="hideTip(event, 'fs27', 149)" onmouseover="showTip(event, 'fs27', 149)" class="id">n15LookUpResult2</span><span class="pn">.</span><span class="pn">[</span><span onmouseout="hideTip(event, 'fs27', 150)" onmouseover="showTip(event, 'fs27', 150)" class="id">n15LookUpResult2</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 151)" onmouseover="showTip(event, 'fs15', 151)" class="id">Length</span><span class="o">-</span><span class="n">1</span><span class="pn">]</span>
<span onmouseout="hideTip(event, 'fs27', 152)" onmouseover="showTip(event, 'fs27', 152)" class="id">n15LookUpResult2</span><span class="pn">.</span><span class="pn">[</span><span class="n">0</span><span class="pn">]</span>

<span onmouseout="hideTip(event, 'fs27', 153)" onmouseover="showTip(event, 'fs27', 153)" class="id">n15LookUpResult2</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs15', 154)" onmouseover="showTip(event, 'fs15', 154)" class="id">Length</span>
<span class="c">//</span>
<span class="c">//cachi.Keys.[cachi.Keys.Count-1]</span>
<span class="c">//let valy = Cache.binarySearch Cache.Border.Upper cachi 830500000L </span>
<span class="c">//</span>
<span class="c">//let listi = cachi.Values </span>
<span class="c">//            |&gt; Seq.toList </span>
<span class="c">//            |&gt; List.concat </span>
<span class="c">//            |&gt; List.length</span>
<span class="c">//[</span>
<span class="c">//for i in listi do</span>
<span class="c">//    yield    List.tryFind (fun x -&gt; x = i) n15LookUpResult</span>
<span class="c">//] |&gt; List.countBy (fun x -&gt; x.IsSome)</span>
<span class="c">//cachi.Count</span>
<span class="c">//let cachi2 = Cache.createCache&lt;float, float list&gt;</span>
<span class="c">//cachi2.Comparer.Compare(4.,2.)</span>
<span class="c">//cachi.Comparer.Compare(4.,2.)</span>
<span class="c">//</span>
<span class="c">//for x in i do </span>
<span class="c">//    cachi2.Add (x,i)</span>
<span class="c">//</span>
<span class="c">//cachi2.TryGetValue(cachi2.Keys.[cachi2.Keys.Count-1])</span>
<span class="c">//</span>
<span class="c">//</span>
<span class="c">//i.Length</span>
<span class="c">//cachi2.Clear()</span>
<span class="c">//Cache.containsItemsBetween cachi2 (496.23395536185,497.) </span>
<span class="c">//</span>
<span class="c">//let a = cachi2.Keys.[cachi2.Keys.Count-1]</span>
<span class="c">//</span>
<span class="c">//let c = 497.</span>
<span class="c">//</span>
<span class="c">//a = c</span>
<span class="c">//497. = 497.</span>
<span class="c">//</span>
<span class="c">//let i = [496.233 .. 0.001 .. 497.000] </span>
<span class="c">//i.[i.Length-1]</span>
<span class="c">//let cachi = Cache.createCache&lt;float, LookUpResult&lt;AminoAcid&gt; list&gt;</span>
<span class="c">//cachi.Count</span>
</code></pre></td>
</tr>
</table>
<p>The possibility that the database is empty can be ruled out by performing a lookUp with the mass 1000., which should return a list filled with
items of the type LookUpResult. The explanation to this behaviour can be found examining the SearchDbParameters bound to the name <strong>paramTestN15</strong>.
When looking at the parameters we see that we introduced a IsotopicModification. If the peptide was optained from a sample without this isotopic
modification, a second lookUp in a database lacking IsotopicModification might return a result list containing the peptide of interest.</p>
<p>As a first step a new instance of the type SearchDbParams has to be instantiated and a database has to be created:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Returns a instance of the type SearchDbParams</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs46', 155)" onmouseover="showTip(event, 'fs46', 155)" class="id">paramTestN14</span> <span class="o">=</span> <span class="pn">{</span>
        <span class="id">Name</span><span class="o">=</span><span class="s">&quot;Creinhardtii_CpN14_full_phospho&quot;</span>
        <span class="id">DbFolder</span>            <span class="o">=</span> <span class="pn">(</span><span class="k">__SOURCE_DIRECTORY__</span> <span class="o">+</span> <span class="s">&quot;/data/&quot;</span><span class="pn">)</span>
        <span class="id">FastaPath</span>           <span class="o">=</span> <span class="pn">(</span><span class="k">__SOURCE_DIRECTORY__</span> <span class="o">+</span> <span class="s">&quot;/data/Creinhardtii_281_v5.5.protein.fasta&quot;</span><span class="pn">)</span>
        <span class="id">FastaHeaderToName</span>   <span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 156)" onmouseover="showTip(event, 'fs7', 156)" class="id">id</span>
        <span class="id">Protease</span>            <span class="o">=</span> <span class="id">Digestion</span><span class="pn">.</span><span class="id">Table</span><span class="pn">.</span><span class="id">getProteaseBy</span> <span class="s">&quot;Trypsin&quot;</span>
        <span class="id">MinMissedCleavages</span>  <span class="o">=</span> <span class="n">0</span>
        <span class="id">MaxMissedCleavages</span>  <span class="o">=</span> <span class="n">3</span>
        <span class="id">MaxMass</span>             <span class="o">=</span> <span class="n">15000.</span>
        <span class="id">MinPepLength</span>        <span class="o">=</span> <span class="n">4</span>
        <span class="id">MaxPepLength</span>        <span class="o">=</span> <span class="n">65</span>
        <span class="id">IsotopicMod</span>           <span class="o">=</span> <span class="pn">[</span><span class="pn">]</span>
        <span class="id">MassMode</span>            <span class="o">=</span> <span class="id">SearchDB</span><span class="pn">.</span><span class="id">MassMode</span><span class="pn">.</span><span class="id">Monoisotopic</span>
        <span class="id">MassFunction</span>        <span class="o">=</span> <span onmouseout="hideTip(event, 'fs4', 157)" onmouseover="showTip(event, 'fs4', 157)" class="id">massF</span>
        <span class="id">FixedMods</span>           <span class="o">=</span> <span class="pn">[</span><span class="pn">]</span> 
        <span class="id">VariableMods</span>        <span class="o">=</span> <span class="pn">[</span><span onmouseout="hideTip(event, 'fs2', 158)" onmouseover="showTip(event, 'fs2', 158)" class="id">phosphorylation</span><span class="pn">]</span>
        <span class="id">VarModThreshold</span>     <span class="o">=</span> <span class="n">5</span>
        <span class="pn">}</span>
<span class="pp">#time</span>
<span class="c">/// Returns a function that takes two masses as input parameters and returns a list of peptides (wrapped in the type LookUpResult)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs47', 159)" onmouseover="showTip(event, 'fs47', 159)" class="fn">n14DBLookUpBy</span> <span class="o">=</span>  
        <span class="id">SearchDB</span><span class="pn">.</span><span class="id">getPeptideLookUpBy</span> <span onmouseout="hideTip(event, 'fs46', 160)" onmouseover="showTip(event, 'fs46', 160)" class="id">paramTestN14</span>   
<span class="c">/// Returns a function that takes one inputMass and returns a list of peptides (wrapped in the type LookUpResult) in the range </span>
<span class="c">/// of the inputMass-0.5 to inputMass+0.5 </span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs48', 161)" onmouseover="showTip(event, 'fs48', 161)" class="fn">n14LookUpPeptideBy</span> <span onmouseout="hideTip(event, 'fs10', 162)" onmouseover="showTip(event, 'fs10', 162)" class="id">inputMass</span> <span class="o">=</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs11', 163)" onmouseover="showTip(event, 'fs11', 163)" class="id">lowerBorder</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs10', 164)" onmouseover="showTip(event, 'fs10', 164)" class="id">inputMass</span><span class="o">-</span><span class="n">0.5</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs12', 165)" onmouseover="showTip(event, 'fs12', 165)" class="id">upperBorder</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs10', 166)" onmouseover="showTip(event, 'fs10', 166)" class="id">inputMass</span><span class="o">+</span><span class="n">0.5</span> 
        <span onmouseout="hideTip(event, 'fs47', 167)" onmouseover="showTip(event, 'fs47', 167)" class="fn">n14DBLookUpBy</span> <span onmouseout="hideTip(event, 'fs11', 168)" onmouseover="showTip(event, 'fs11', 168)" class="id">lowerBorder</span> <span onmouseout="hideTip(event, 'fs12', 169)" onmouseover="showTip(event, 'fs12', 169)" class="id">upperBorder</span>
</code></pre></td>
</tr>
</table>
<p>After these steps the following lookup will result in list of lookupResults containing the peptide "ANLGMEVMHER".</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Returns the result of the peptide lookup</span>
<span class="c">//let n14LookUpResult = n14LookUpPeptideBy peptideMass</span>
</code></pre></td>
</tr>
</table>

<div class="tip" id="fs1">val sdbParams : obj</div>
<div class="tip" id="fs2">val phosphorylation : obj<br /><em><br /><br />&#160;Returns a instance of the type SearchModification</em></div>
<div class="tip" id="fs3">val isoMod : obj<br /><em><br /><br />&#160;Returns a instance of the type SearchInfoIsotopic </em></div>
<div class="tip" id="fs4">val massF : (obj -&gt; float)<br /><em><br /><br />Returns a instance of the massfunction BioItem.initMonoisoMassWithMemP</em></div>
<div class="tip" id="fs5">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />--------------------<br />type float = System.Double<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float</div>
<div class="tip" id="fs6">val paramTestN15 : obj<br /><em><br /><br />&#160;Returns a instance of the type SearchDbParams</em></div>
<div class="tip" id="fs7">val id : x:&#39;T -&gt; &#39;T</div>
<div class="tip" id="fs8">val n15DBLookUpBy : (float -&gt; float -&gt; obj list)<br /><em><br /><br />&#160;Returns a function that takes two masses as input parameters and returns a list of peptides (wrapped in the type LookUpResult)</em></div>
<div class="tip" id="fs9">val n15LookUpPeptideBy : inputMass:float -&gt; obj list<br /><em><br /><br />&#160;Returns a function that takes one inputMass and returns a list of peptides (wrapped in the type LookUpResult) in the range <br />&#160;of the inputMass-0.5 to inputMass+0.5 </em></div>
<div class="tip" id="fs10">val inputMass : float</div>
<div class="tip" id="fs11">val lowerBorder : float</div>
<div class="tip" id="fs12">val upperBorder : float</div>
<div class="tip" id="fs13">val peptideMass : float<br /><em><br /><br />&#160;PeptideMass of the peptide known from the peptide *ANLGMEVMHER*. </em></div>
<div class="tip" id="fs14">val i : float list</div>
<div class="tip" id="fs15">property List.Length: int</div>
<div class="tip" id="fs16">val res : obj list list</div>
<div class="tip" id="fs17">val x : float</div>
<div class="tip" id="fs18">val n15LookUpResult : obj list</div>
<div class="tip" id="fs19">Multiple items<br />module List<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------<br />type List&lt;&#39;T&gt; =<br />&#160;&#160;| ( [] )<br />&#160;&#160;| ( :: ) of Head: &#39;T * Tail: &#39;T list<br />&#160;&#160;&#160;&#160;interface IReadOnlyCollection&lt;&#39;T&gt;<br />&#160;&#160;&#160;&#160;interface IEnumerable<br />&#160;&#160;&#160;&#160;interface IEnumerable&lt;&#39;T&gt;<br />&#160;&#160;&#160;&#160;member GetSlice : startIndex:int option * endIndex:int option -&gt; &#39;T list<br />&#160;&#160;&#160;&#160;member Head : &#39;T<br />&#160;&#160;&#160;&#160;member IsEmpty : bool<br />&#160;&#160;&#160;&#160;member Item : index:int -&gt; &#39;T with get<br />&#160;&#160;&#160;&#160;member Length : int<br />&#160;&#160;&#160;&#160;member Tail : &#39;T list<br />&#160;&#160;&#160;&#160;static member Cons : head:&#39;T * tail:&#39;T list -&gt; &#39;T list<br />&#160;&#160;&#160;&#160;...</div>
<div class="tip" id="fs20">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; list:&#39;T list -&gt; &#39;U list</div>
<div class="tip" id="fs21">val x : obj list</div>
<div class="tip" id="fs22">val cachi2 : obj<br /><em><br /><br />&#160;Returns the result of the peptide lookup </em></div>
<div class="tip" id="fs23">Multiple items<br />val int64 : value:&#39;T -&gt; int64 (requires member op_Explicit)<br /><br />--------------------<br />type int64 = System.Int64<br /><br />--------------------<br />type int64&lt;&#39;Measure&gt; = int64</div>
<div class="tip" id="fs24">type &#39;T list = List&lt;&#39;T&gt;</div>
<div class="tip" id="fs25">val cachedLook : (float -&gt; float -&gt; obj list)</div>
<div class="tip" id="fs26">val cachedn15LookUpPeptideBy : inputMass:float -&gt; obj list</div>
<div class="tip" id="fs27">val n15LookUpResult2 : obj list</div>
<div class="tip" id="fs28">val cachedRes : obj list list</div>
<div class="tip" id="fs29">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs30">val concat : sources:seq&lt;#seq&lt;&#39;T&gt;&gt; -&gt; seq&lt;&#39;T&gt;</div>
<div class="tip" id="fs31">val length : source:seq&lt;&#39;T&gt; -&gt; int</div>
<div class="tip" id="fs32">val map2 : mapping:(&#39;T1 -&gt; &#39;T2 -&gt; &#39;U) -&gt; list1:&#39;T1 list -&gt; list2:&#39;T2 list -&gt; &#39;U list</div>
<div class="tip" id="fs33">val y : obj list</div>
<div class="tip" id="fs34">val xs : obj</div>
<div class="tip" id="fs35">val tryFind : predicate:(&#39;T -&gt; bool) -&gt; list:&#39;T list -&gt; &#39;T option</div>
<div class="tip" id="fs36">val ys : obj</div>
<div class="tip" id="fs37">val countBy : projection:(&#39;T -&gt; &#39;Key) -&gt; list:&#39;T list -&gt; (&#39;Key * int) list (requires equality)</div>
<div class="tip" id="fs38">val x : obj option</div>
<div class="tip" id="fs39">property Option.IsSome: bool</div>
<div class="tip" id="fs40">val n15LookUpResult3 : obj list</div>
<div class="tip" id="fs41">val x : obj</div>
<div class="tip" id="fs42">val y : obj</div>
<div class="tip" id="fs43">val filter : predicate:(&#39;T -&gt; bool) -&gt; list:&#39;T list -&gt; &#39;T list</div>
<div class="tip" id="fs44">val x : obj * obj option</div>
<div class="tip" id="fs45">val snd : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T2</div>
<div class="tip" id="fs46">val paramTestN14 : obj<br /><em><br /><br />&#160;Returns a instance of the type SearchDbParams</em></div>
<div class="tip" id="fs47">val n14DBLookUpBy : (float -&gt; float -&gt; obj)<br /><em><br /><br />&#160;Returns a function that takes two masses as input parameters and returns a list of peptides (wrapped in the type LookUpResult)</em></div>
<div class="tip" id="fs48">val n14LookUpPeptideBy : inputMass:float -&gt; obj<br /><em><br /><br />&#160;Returns a function that takes one inputMass and returns a list of peptides (wrapped in the type LookUpResult) in the range <br />&#160;of the inputMass-0.5 to inputMass+0.5 </em></div>
<div class="tip" id="fs49">namespace System</div>
<div class="tip" id="fs50">namespace System.Collections</div>
<div class="tip" id="fs51">namespace System.Collections.Generic</div>
<div class="tip" id="fs52">Multiple items<br />type LookUpResultComp =<br />&#160;&#160;interface obj<br />&#160;&#160;new : unit -&gt; LookUpResultComp<br />&#160;&#160;override Compare : x:&#39;a * y:&#39;b -&gt; int<br /><em><br /><br />&#160;Returns the result of the peptide lookup</em><br /><br />--------------------<br />new : unit -&gt; LookUpResultComp</div>
<div class="tip" id="fs53">type IComparer&lt;&#39;T&gt; =<br />&#160;&#160;member Compare : x:&#39;T * y:&#39;T -&gt; int</div>
<div class="tip" id="fs54">val this : LookUpResultComp</div>
<div class="tip" id="fs55">val x : &#39;a</div>
<div class="tip" id="fs56">val y : &#39;b</div>
<div class="tip" id="fs57">val abs : value:&#39;T -&gt; &#39;T (requires member Abs)</div>

        </div>
        <div class="span3">
          <img src="/BioFSharp.Mz/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />  
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">BioFSharp.Mz</li>
            <li><a href="/BioFSharp.Mz/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/BioFSharp.Mz">Get Library via NuGet</a></li>
            <li><a href="https://github.com/CSBiology/BioFSharp.Mz">Source Code on GitHub</a></li>
            <li><a href="/BioFSharp.Mz/license.html">License</a></li>
            <li><a href="/BioFSharp.Mz/release-notes.html">Release Notes</a></li>
            
            <li class="nav-header">Getting started</li>
            <li><a href="/BioFSharp.Mz/tutorial.html">Sample tutorial</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="/BioFSharp.Mz/reference/index.html">API Reference</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="https://github.com/CSBiology/BioFSharp.Mz"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
  </html>
